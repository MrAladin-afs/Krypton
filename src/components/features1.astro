---
import { cn } from "~/lib/utils";

// Feature content with proper TypeScript interface
interface Feature {
  title: string;
  description: string;
  imageUrl: string;
  imageAlt: string;
  imagePosition: "left" | "right";
  accentColor: string;
  imageSize: "small" | "large";
  textSize: "small" | "large";
}

const features: Feature[] = [
  {
    title: "Immersive Gaming",
    description:
      "Step into a world where every detail matters with stunning visuals, realistic physics, and responsive controls.",
    imageUrl:
      "https://images.unsplash.com/photo-1542751371-adc38448a05e?q=80&w=1200&auto=format&fit=crop",
    imageAlt: "Gaming setup with neon lights",
    imagePosition: "right",
    accentColor: "from-blue-500 via-indigo-500 to-purple-600",
    imageSize: "small",
    textSize: "large",
  },
  {
    title: "Custom Roleplay",
    description:
      "Create unique characters with extensive customization options for appearances, clothing, and backstories.",
    imageUrl:
      "https://images.unsplash.com/photo-1511512578047-dfb367046420?q=80&w=1200&auto=format&fit=crop",
    imageAlt: "Person with gaming headset in front of computer",
    imagePosition: "left",
    accentColor: "from-emerald-500 via-teal-500 to-cyan-500",
    imageSize: "large",
    textSize: "small",
  },
  {
    title: "Thriving Community",
    description:
      "Join a world where actions have consequences and relationships matter in our evolving player-driven ecosystem.",
    imageUrl:
      "https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?q=80&w=1200&auto=format&fit=crop",
    imageAlt: "Group of friends playing games together",
    imagePosition: "right",
    accentColor: "from-amber-500 via-orange-500 to-red-500",
    imageSize: "small",
    textSize: "large",
  },
];
---

<section id="features1" class="relative py-3 overflow-hidden bg-background">
  <!-- Background elements -->
  <div
    class="absolute inset-0 bg-grid-pattern opacity-[0.02] pointer-events-none">
  </div>

  <div class="container mx-auto px-2 relative z-10">
    <div
      class="text-center mb-3 sm:mb-4"
      data-aos="fade-up"
      data-aos-duration="600">
      <h2 class="text-xl sm:text-3xl font-bold mb-1 sm:mb-2 text-shimmer">
        Key Features
      </h2>
    </div>

    <div class="space-y-4 sm:space-y-6">
      {
        features.map((feature, index) => (
          <div
            class="flex flex-col items-center"
            data-aos="fade-up"
            data-aos-duration="600"
            data-aos-delay={index * 20}>
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-2 lg:gap-3 items-center max-w-5xl mx-auto">
              {/* Image Column */}
              <div
                class={cn(
                  "relative overflow-hidden rounded-lg shadow-md",
                  feature.imagePosition === "right"
                    ? "lg:order-2"
                    : "lg:order-1",
                  feature.imageSize === "small"
                    ? "lg:col-span-5"
                    : "lg:col-span-7",
                  "aspect-[16/9] lg:aspect-auto"
                )}>
                {/* Gradient overlay */}
                <div
                  class={cn(
                    "absolute inset-0 opacity-30 mix-blend-overlay z-10",
                    `bg-gradient-to-br ${feature.accentColor}`
                  )}
                />

                {/* Image */}
                <img
                  src={feature.imageUrl}
                  alt={feature.imageAlt}
                  class="w-full h-full object-cover"
                  loading="lazy"
                  width={feature.imageSize === "small" ? "400" : "600"}
                  height={feature.imageSize === "small" ? "300" : "338"}
                />

                {/* Frame accent */}
                <div class="absolute inset-0 border border-white/10 rounded-lg pointer-events-none z-20" />

                {/* Floating badge - smaller on mobile */}
                <div
                  class={cn(
                    "absolute z-20 backdrop-blur-md bg-background/60 border border-white/10 rounded-full px-1.5 py-0.5 shadow-sm text-xs",
                    feature.imagePosition === "right"
                      ? "top-1 left-1"
                      : "top-1 right-1"
                  )}>
                  <span
                    class={cn(
                      "text-xs font-medium bg-clip-text text-transparent bg-gradient-to-r",
                      feature.accentColor
                    )}>
                    {index === 0
                      ? "Premium"
                      : index === 1
                        ? "Exclusive"
                        : "Community"}
                  </span>
                </div>
              </div>

              {/* Content Column */}
              <div
                class={cn(
                  "flex flex-col space-y-1 mt-2 lg:mt-0",
                  feature.imagePosition === "right"
                    ? "lg:order-1 lg:text-right"
                    : "lg:order-2 lg:text-left",
                  feature.textSize === "small"
                    ? "lg:col-span-5"
                    : "lg:col-span-7"
                )}>
                <h3
                  class={cn(
                    "text-lg sm:text-xl font-bold leading-tight",
                    feature.imagePosition === "right" ? "lg:pr-1" : "lg:pl-1"
                  )}>
                  <span
                    class={cn(
                      "bg-clip-text text-transparent bg-gradient-to-r",
                      feature.accentColor
                    )}>
                    {feature.title}
                  </span>
                </h3>

                <p
                  class={cn(
                    "text-xs sm:text-sm text-foreground/80 leading-relaxed",
                    feature.imagePosition === "right" ? "lg:pr-1" : "lg:pl-1"
                  )}>
                  {feature.description}
                </p>

                <div
                  class={cn(
                    "pt-1",
                    feature.imagePosition === "right"
                      ? "lg:text-right"
                      : "lg:text-left"
                  )}>
                  <a
                    href="#"
                    class={cn(
                      "inline-flex items-center gap-1 text-xs font-medium transition-all duration-300",
                      "py-1 px-2 rounded-full",
                      "bg-gradient-to-r bg-size-200 bg-pos-0 hover:bg-pos-100",
                      feature.accentColor,
                      "text-white shadow-sm"
                    )}
                    aria-label={`Learn more about ${feature.title}`}>
                    {feature.imagePosition === "left" && (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="10"
                        height="10"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="mr-0.5">
                        <path d="M5 12h14" />
                        <path d="m12 5 7 7-7 7" />
                      </svg>
                    )}
                    More
                    {feature.imagePosition === "right" && (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="10"
                        height="10"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="ml-0.5">
                        <path d="M5 12h14" />
                        <path d="m12 5 7 7-7 7" />
                      </svg>
                    )}
                  </a>
                </div>
              </div>
            </div>

            {/* Decorative line - much thinner spacing */}
            {index < features.length - 1 && (
              <div class="w-full max-w-xs mx-auto mt-3 mb-1">
                <div class="h-px bg-gradient-to-r from-transparent via-border/20 to-transparent" />
              </div>
            )}
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .bg-grid-pattern {
    background-image: linear-gradient(
        to right,
        rgba(var(--foreground), 0.03) 1px,
        transparent 1px
      ),
      linear-gradient(
        to bottom,
        rgba(var(--foreground), 0.03) 1px,
        transparent 1px
      );
    background-size: 30px 30px;
  }

  .bg-size-200 {
    background-size: 200% 100%;
  }

  .bg-pos-0 {
    background-position: 0% 0%;
  }

  .bg-pos-100 {
    background-position: 100% 0%;
  }
</style>
