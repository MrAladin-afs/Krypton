---
export interface Props {
  type: 'Organization' | 'BlogPosting' | 'Blog' | 'WebSite' | 'BreadcrumbList';
  data: any;
}

const { type, data } = Astro.props;

const baseStructuredData = {
  "@context": "https://schema.org",
  "@type": type,
  ...data
};

// Add specific enhancements based on type
if (type === 'BlogPosting') {
  baseStructuredData["@type"] = "BlogPosting";
  if (data.publisher) {
    baseStructuredData.publisher = {
      "@type": "Organization",
      "name": data.publisher.name || "Krypton Scripts",
      "logo": {
        "@type": "ImageObject",
        "url": data.publisher.logo || "https://blog.kryptongame.com/krypton-logo.svg"
      }
    };
  }
}

if (type === 'BreadcrumbList') {
  baseStructuredData["@type"] = "BreadcrumbList";
  if (data.itemListElement) {
    baseStructuredData.itemListElement = data.itemListElement.map((item: any, index: number) => ({
      "@type": "ListItem",
      "position": index + 1,
      "name": item.name,
      "item": item.item
    }));
  }
}
---

<script type="application/ld+json" set:html={JSON.stringify(baseStructuredData)} />
